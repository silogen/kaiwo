
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../installation/">
      
      
        <link rel="next" href="../maintenance/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Configuration - Kaiwo - Kubernetes-native AI Workload Orchestrator</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Kaiwo - Kubernetes-native AI Workload Orchestrator" class="md-header__button md-logo" aria-label="Kaiwo - Kubernetes-native AI Workload Orchestrator" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kaiwo - Kubernetes-native AI Workload Orchestrator
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../scientist/overview/" class="md-tabs__link">
          
  
  
  AI Scientist

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../overview/" class="md-tabs__link">
          
  
  
  Administrator

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../aim/" class="md-tabs__link">
          
  
  
  AIM

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/crds/kaiwo.silogen.ai/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Kaiwo - Kubernetes-native AI Workload Orchestrator" class="md-nav__button md-logo" aria-label="Kaiwo - Kubernetes-native AI Workload Orchestrator" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Kaiwo - Kubernetes-native AI Workload Orchestrator
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Home
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../general/main-components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Main Components
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../general/releases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Releases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../general/support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Support
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI Scientist
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI Scientist
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scientist/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scientist/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scientist/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scientist/scheduling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scheduling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Administrator
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Administrator
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kaiwoqueueconfig-crd" class="md-nav__link">
    <span class="md-ellipsis">
      
        KaiwoQueueConfig CRD
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KaiwoQueueConfig CRD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controller-operation-and-kueue-resource-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controller Operation and Kueue Resource Synchronization
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kaiwoconfig-crd" class="md-nav__link">
    <span class="md-ellipsis">
      
        KaiwoConfig CRD
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KaiwoConfig CRD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-the-configuration-cr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Specifying the Configuration CR
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-kaiwoconfig-cr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example KaiwoConfig CR
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operator-environmental-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operator Environmental Variables
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operator Environmental Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kueue" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kueue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource Monitoring
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other configuration options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maintenance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Maintenance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resource-monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resource monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication & Authorization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AIM
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    AIM
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Usage
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aim/usage/services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deploying AIM Services
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aim/concepts/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AIM Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aim/concepts/templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AIM Service Templates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aim/concepts/runtime-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AIM Runtime Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/crds/aim.silogen.ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/crds/kaiwo.silogen.ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kaiwo API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/crds/config.kaiwo.silogen.ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kaiwo Configuration API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kaiwoqueueconfig-crd" class="md-nav__link">
    <span class="md-ellipsis">
      
        KaiwoQueueConfig CRD
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KaiwoQueueConfig CRD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controller-operation-and-kueue-resource-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controller Operation and Kueue Resource Synchronization
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kaiwoconfig-crd" class="md-nav__link">
    <span class="md-ellipsis">
      
        KaiwoConfig CRD
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="KaiwoConfig CRD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specifying-the-configuration-cr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Specifying the Configuration CR
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-kaiwoconfig-cr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example KaiwoConfig CR
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operator-environmental-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Operator Environmental Variables
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operator Environmental Variables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kueue" class="md-nav__link">
    <span class="md-ellipsis">
      
        Kueue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      
        Resource Monitoring
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other configuration options
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="configuration-guide">Configuration Guide</h1>
<p>Administrators configure Kaiwo primarily through</p>
<ul>
<li>The cluster-scoped <code>KaiwoQueueConfig</code> Custom Resource Definition (CRD)</li>
<li>The cluster-scoped <code>KaiwoConfig</code> CRD</li>
<li>Environment variables or flags passed to the Kaiwo operator</li>
</ul>
<p>Users configure the CLI tool separately.</p>
<h2 id="kaiwoqueueconfig-crd">KaiwoQueueConfig CRD</h2>
<p>This is the central point for managing how Kaiwo interacts with Kueue. There can be only <strong>one</strong> <code>KaiwoQueueConfig</code> resource in the cluster, and its <code>metadata.name</code> <strong>must be <code>kaiwo</code></strong> (or the value specified in the KaiwoConfig Custom Resource field <code>spec.defaultKaiwoQueueConfigName</code>, which defaults to <code>kaiwo</code>, see more below).</p>
<p><strong>Default Configuration on Startup:</strong></p>
<p>The Kaiwo operator includes a startup routine that checks if a <code>KaiwoQueueConfig</code> named <code>kaiwo</code> exists. If it does not, the operator automatically creates a default one. This default configuration aims to provide a functional baseline:</p>
<ul>
<li>It attempts to <strong>auto-discover</strong> node pools based on common GPU labels (e.g., <code>amd.com/gpu.product-name</code>, <code>nvidia.com/gpu.product</code>, <code>nvidia.com/gpu.count</code>) and CPU/Memory capacity.</li>
<li>It creates corresponding Kueue <code>ResourceFlavor</code> resources based on this discovery, labeling the nodes with <code>kaiwo/nodepool=&lt;generated-flavor-name&gt;</code>.</li>
<li>It defines a single Kueue <code>ClusterQueue</code> named <code>kaiwo</code> (or the value of <code>DEFAULT_CLUSTER_QUEUE_NAME</code>), configured to use all discovered <code>ResourceFlavors</code> and their estimated capacities as <code>nominalQuota</code>.</li>
<li>It specifies that this default <code>ClusterQueue</code> should have a corresponding <code>LocalQueue</code> automatically created in the <code>kaiwo</code> namespace.</li>
<li>It does not define any <code>WorkloadPriorityClass</code> resources by default.</li>
</ul>
<p>You can modify this automatically created configuration or create your own <code>kaiwo</code> resource manually using: <code>kubectl edit kaiwoqueueconfig kaiwo</code> or by applying a YAML manifest.</p>
<p><strong>Key Fields (<code>spec</code>):</strong></p>
<ul>
<li>
<p><strong><code>resourceFlavors</code></strong>: Defines the types of hardware resources available in the cluster, corresponding to Kueue <code>ResourceFlavor</code> resources.</p>
<ul>
<li><code>name</code>: A unique name for the flavor (e.g., <code>amd-mi300-8gpu</code>, <code>nvidia-a100-40gb</code>, <code>cpu-standard</code>).</li>
<li><code>nodeLabels</code>: A map of labels that nodes must possess to be considered part of this flavor. This is crucial for scheduling pods onto the correct hardware. Example: <code>{"kaiwo/nodepool": "amd-mi300-nodes"}</code>.</li>
<li><code>taints</code>: (Optional) A list of Kubernetes taints associated with this flavor. Pods scheduled to this flavor will need corresponding tolerations. Kaiwo automatically adds tolerations for GPU taints if <code>ADD_TAINTS_TO_GPU_NODES</code> is enabled.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Auto-Discovery vs. Explicit Definition</p>
<p>If <code>spec.resourceFlavors</code> is empty or omitted in the <code>kaiwo</code> <code>KaiwoQueueConfig</code>, the operator's startup logic attempts to <strong>auto-discover</strong> node pools and create corresponding flavors as described above. While convenient for initial setup, explicitly defining <code>resourceFlavors</code> in the <code>KaiwoQueueConfig</code> provides more precise control and is generally recommended for production environments. Explicitly defined flavors will override any auto-discovered ones during reconciliation.</p>
</div>
</li>
<li>
<p><strong><code>clusterQueues</code></strong>: Defines the Kueue <code>ClusterQueue</code> resources managed by Kaiwo.</p>
<ul>
<li><code>name</code>: The name of the <code>ClusterQueue</code> (e.g., <code>team-a-queue</code>, <code>default-gpu-queue</code>).</li>
<li><code>spec</code>: The full Kueue <code>ClusterQueueSpec</code>. This is where you define resource quotas, cohorts, preemption policies, etc. See <a href="https://kueue.sigs.k8s.io/docs/concepts/cluster_queue/">Kueue ClusterQueue Documentation</a>.<ul>
<li><code>resourceGroups</code>: Define sets of flavors and their associated quotas (<code>nominalQuota</code>). This links the queue to the available hardware defined in <code>resourceFlavors</code>.</li>
<li><code>namespaceSelector</code>: Controls which namespaces can use this queue via <code>LocalQueue</code> resources <em>if</em> those LocalQueues exist. Note that Kaiwo's automatic <code>LocalQueue</code> creation relies on the <code>namespaces</code> field below, not this selector.</li>
</ul>
</li>
<li><code>namespaces</code>: A list of namespace names where Kaiwo should automatically create and manage a Kueue <code>LocalQueue</code> pointing to this <code>ClusterQueue</code>. The <code>LocalQueue</code> created will have the same name as the <code>ClusterQueue</code>.</li>
</ul>
</li>
<li>
<p><strong><code>workloadPriorityClasses</code></strong>: Defines Kueue <code>WorkloadPriorityClass</code> resources.</p>
<ul>
<li>Follows the standard Kueue <code>WorkloadPriorityClass</code> structure (<code>name</code>, <code>value</code>, <code>description</code>). Kaiwo ensures these exist as defined. See <a href="https://kueue.sigs.k8s.io/docs/concepts/workload_priority_class/">Kueue Priority Documentation</a>.</li>
</ul>
</li>
</ul>
<p><strong>Example <code>KaiwoQueueConfig</code>:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kaiwo.silogen.ai/v1alpha1</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KaiwoQueueConfig</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kaiwo</span><span class="w"> </span><span class="c1"># Must be named &#39;kaiwo&#39; (or DEFAULT_KAIWO_QUEUE_CONFIG_NAME)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nt">spec</span><span class="p">:</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span><span class="nt">resourceFlavors</span><span class="p">:</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">amd-mi300-8gpu</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">      </span><span class="nt">nodeLabels</span><span class="p">:</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">        </span><span class="nt">kaiwo/nodepool</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">amd-mi300-nodes</span><span class="w"> </span><span class="c1"># Nodes with this label belong to this flavor</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">        </span><span class="c1"># Add other identifying labels if needed, e.g., topology.amd.com/gpu-count: &#39;8&#39;</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">      </span><span class="c1"># taints: # Optional, define if specific taints apply ONLY to these nodes</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">      </span><span class="c1"># - key: &quot;amd.com/gpu&quot;</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">      </span><span class="c1">#   operator: &quot;Exists&quot;</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">      </span><span class="c1">#   effect: &quot;NoSchedule&quot;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu-high-mem</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">      </span><span class="nt">nodeLabels</span><span class="p">:</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">        </span><span class="nt">kaiwo/nodepool</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu-high-mem-nodes</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">  </span><span class="nt">clusterQueues</span><span class="p">:</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ai-research-queue</span><span class="w"> </span><span class="c1"># Name of the ClusterQueue</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">      </span><span class="nt">namespaces</span><span class="p">:</span><span class="w"> </span><span class="c1"># Auto-create/manage LocalQueues in these namespaces</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ai-research-ns-1</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ai-research-ns-2</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">      </span><span class="nt">spec</span><span class="p">:</span><span class="w"> </span><span class="c1"># Standard Kueue ClusterQueueSpec</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">        </span><span class="nt">queueingStrategy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BestEffortFIFO</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">        </span><span class="nt">resourceGroups</span><span class="p">:</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">coveredResources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;cpu&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;memory&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;amd.com/gpu&quot;</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># Resources managed by this group</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">            </span><span class="nt">flavors</span><span class="p">:</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">amd-mi300-8gpu</span><span class="w"> </span><span class="c1"># Reference to a defined resourceFlavor</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="w">                </span><span class="nt">resources</span><span class="p">:</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="w">                  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cpu&quot;</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="w">                    </span><span class="nt">nominalQuota</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192&quot;</span><span class="w"> </span><span class="c1"># Total CPU quota for this flavor in this queue</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="w">                  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;memory&quot;</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="w">                    </span><span class="nt">nominalQuota</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1024Gi&quot;</span><span class="w"> </span><span class="c1"># Total Memory quota</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="w">                  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;amd.com/gpu&quot;</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="w">                    </span><span class="nt">nominalQuota</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8&quot;</span><span class="w"> </span><span class="c1"># Total GPU quota</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">coveredResources</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;cpu&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;memory&quot;</span><span class="p p-Indicator">]</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="w">            </span><span class="nt">flavors</span><span class="p">:</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cpu-high-mem</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="w">                </span><span class="nt">resources</span><span class="p">:</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a><span class="w">                  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cpu&quot;</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a><span class="w">                    </span><span class="nt">nominalQuota</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;256&quot;</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="w">                  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;memory&quot;</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a><span class="w">                    </span><span class="nt">nominalQuota</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2048Gi&quot;</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a><span class="w">        </span><span class="c1"># cohort: &quot;gpu-cohort&quot; # Optional: Group queues for borrowing/preemption</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a><span class="w">        </span><span class="c1"># preemption: ...</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a><span class="w">  </span><span class="nt">workloadPriorityClasses</span><span class="p">:</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">high-priority</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a><span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">low-priority</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a><span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</span></code></pre></div>
<h3 id="controller-operation-and-kueue-resource-synchronization">Controller Operation and Kueue Resource Synchronization</h3>
<p>The <code>KaiwoQueueConfigController</code> acts as a translator, continuously ensuring that the Kueue resources in your cluster accurately reflect the configuration defined in the single <code>kaiwo</code> <code>KaiwoQueueConfig</code> resource. It monitors this resource and automatically manages the lifecycle of the associated Kueue objects:</p>
<ul>
<li>
<p><strong><code>spec.resourceFlavors</code> -&gt; Kueue <code>ResourceFlavor</code>:</strong></p>
<ul>
<li>Each entry in this list directly defines a Kueue <code>ResourceFlavor</code>.</li>
<li>The controller ensures a corresponding <code>ResourceFlavor</code> exists for each entry, creating or updating it as necessary based on the specified <code>name</code>, <code>nodeLabels</code>, and <code>taints</code>.</li>
<li>If an entry is removed from this list, the controller deletes the corresponding <code>ResourceFlavor</code>.</li>
</ul>
</li>
<li>
<p><strong><code>spec.clusterQueues</code> -&gt; Kueue <code>ClusterQueue</code> and <code>LocalQueue</code>:</strong></p>
<ul>
<li>Each entry in this list defines a Kueue <code>ClusterQueue</code>. The controller translates the structure into a standard <code>ClusterQueueSpec</code> and ensures the resource exists and matches the definition. Removing an entry deletes the corresponding <code>ClusterQueue</code>.</li>
<li>The <code>namespaces</code> field within each <code>clusterQueues</code> entry dictates where Kueue <code>LocalQueue</code>s should exist. The controller automatically creates a <code>LocalQueue</code> (named after the <code>ClusterQueue</code>) in each listed namespace, pointing to the corresponding <code>ClusterQueue</code>. If a namespace is removed from the list, or the parent <code>ClusterQueue</code> entry is removed, the controller deletes the associated <code>LocalQueue</code> in that namespace.</li>
</ul>
</li>
<li>
<p><strong><code>spec.workloadPriorityClasses</code> -&gt; Kueue <code>WorkloadPriorityClass</code>:</strong></p>
<ul>
<li>Each entry defines a Kueue <code>WorkloadPriorityClass</code>.</li>
<li>The controller manages these resources, ensuring they exist with the specified <code>name</code>, <code>value</code>, and <code>description</code>.</li>
<li>Removing an entry results in the deletion of the corresponding <code>WorkloadPriorityClass</code>.</li>
</ul>
</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Owner References</p>
<p>The controller establishes the <code>kaiwo</code> <code>KaiwoQueueConfig</code> as the owner of all the Kueue resources it creates. This linkage ensures that if the <code>KaiwoQueueConfig</code> is deleted, Kubernetes automatically cleans up all the managed Kueue resources (<code>ResourceFlavor</code>, <code>ClusterQueue</code>, <code>LocalQueue</code>, <code>WorkloadPriorityClass</code>).</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Kueue resource management</p>
<p>Kaiwo takes ownership of Kueue <code>ResourceFlavor</code>, <code>ClusterQueue</code>, <code>LocalQueue</code> and <code>WorkloadPriorityClass</code> resources. This means that resources of these types that are created manually, i.e. not via the <code>KaiwoQueueConfig</code>, may be deleted by the Kaiwo Controller</p>
</div>
<p>The controller updates the <code>status.status</code> field of the <code>KaiwoQueueConfig</code> resource (<code>Pending</code>, <code>Ready</code>, or <code>Failed</code>) to indicate the current state of synchronization between the desired configuration and the actual Kueue resources in the cluster. This continuous reconciliation keeps the Kueue setup aligned with the central <code>KaiwoQueueConfig</code>.</p>
<h2 id="kaiwoconfig-crd">KaiwoConfig CRD</h2>
<p>The Kaiwo Operator's runtime configuration is managed through the <code>KaiwoConfig</code> Custom Resource Definition (CRD). This approach allows Kubernetes administrators to dynamically adjust operator behavior without requiring a restart. The operator always retrieves the most recent configuration values during each reconcile loop.</p>
<h3 id="configuration-structure">Configuration Structure</h3>
<p>The primary configuration resource is the <code>KaiwoConfig</code> CRD, typically maintained as a singleton within the Kubernetes cluster. Its key components are encapsulated in the <code>KaiwoConfigSpec</code>, which briefly includes:</p>
<ul>
<li><strong><code>kueue</code></strong>: Configures default integration settings with Kueue, including the default cluster queue name.</li>
<li><strong><code>ray</code></strong>: Specifies Ray-specific parameters, including default container images and memory allocations.</li>
<li><strong><code>storage</code></strong>: Manages default filesystem paths for mounting data storage and HuggingFace caches.</li>
<li><strong><code>nodes</code></strong>: Defines node-specific settings such as GPU resource keys, GPU node taints, and node pool exclusions.</li>
<li><strong><code>scheduling</code></strong>: Sets scheduling-related configurations, like the Kubernetes scheduler name.</li>
<li><strong><code>resourceMonitoring</code></strong>: Configures resource monitoring, including averaging intervals, utilization thresholds, and targeted namespaces.</li>
<li><strong><code>defaultKaiwoQueueConfigName</code></strong>: Specifies the default name for the Kaiwo queue configuration object.</li>
</ul>
<h3 id="specifying-the-configuration-cr">Specifying the Configuration CR</h3>
<p>The Kaiwo Operator identifies its configuration resource via the environment variable <code>CONFIG_NAME</code>. By default, this is set to <code>kaiwo</code>. Ensure that a <code>KaiwoConfig</code> resource with this exact name exists in your cluster. The operator automatically creates a default configuration at startup if none exists.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The operator waits up to <strong>30 seconds</strong> for the specified configuration resource to be found. If no resource is detected within this period, the operator pod will fail with an error.</p>
</div>
<h3 id="example-kaiwoconfig-cr">Example KaiwoConfig CR</h3>
<p>Here's a minimal example of a valid <code>KaiwoConfig</code> definition:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">config.kaiwo.silogen.ai/v1alpha1</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KaiwoConfig</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nt">metadata</span><span class="p">:</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kaiwo</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="nt">spec</span><span class="p">:</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="nt">scheduling</span><span class="p">:</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="nt">kubeSchedulerName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;kaiwo-scheduler&quot;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span><span class="nt">resourceMonitoring</span><span class="p">:</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="nt">averagingTime</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20m&quot;</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">    </span><span class="nt">lowUtilizationThreshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="nt">profile</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gpu&quot;</span>
</span></code></pre></div>
<hr />
<p>For detailed descriptions of individual configuration fields, please see the <a href="../../reference/crds/config.kaiwo.silogen.ai/">full API reference</a>.</p>
<h2 id="operator-environmental-variables">Operator Environmental Variables</h2>
<p>Some configuration is not changeable during runtime, or they may be often referenced from other config maps or secrets, and thus they are stored as environmental variables. These settings are not dynamic, and the operator must be restarted in order for changes to these values to take effect.</p>
<h3 id="kueue">Kueue</h3>
<ul>
<li><code>DEFAULT_KAIWO_QUEUE_CONFIG_NAME</code>: The name of the singleton <code>KaiwoQueueConfig</code> custom resource to be used (defaults to <code>kaiwo</code>)</li>
<li><code>DEFAULT_CLUSTER_QUEUE_NAME</code>: The name of the default Kueue cluster queue (defaults to <code>kaiwo</code>)</li>
</ul>
<h3 id="resource-monitoring">Resource Monitoring</h3>
<p>To enable and configure resource monitoring within the Kaiwo Operator, the following environment variables <strong>must</strong> be set on the operator deployment:</p>
<ul>
<li><code>RESOURCE_MONITORING_ENABLED=true</code>  Enables the resource monitoring component.</li>
<li><code>RESOURCE_MONITORING_PROMETHEUS_ENDPOINT=&lt;prometheus-endpoint&gt;</code>  Specifies the Prometheus endpoint to query metrics from.</li>
<li><code>RESOURCE_MONITORING_POLLING_INTERVAL=10m</code>  Sets the interval between metric polling queries.</li>
</ul>
<h3 id="other-configuration-options">Other configuration options</h3>
<ul>
<li><code>WEBHOOK_CERT_DIRECTORY</code>: Path to manually provided webhook certificates (overrides automatic management if set). See <a href="../installation/">Installation</a>.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Forthcoming feature</p>
<p><code>ENFORCE_KAIWO_ON_GPU_WORKLOADS</code> (Default: <code>false</code>): If <code>true</code>, the mutating admission webhook for <code>batchv1.Job</code> will automatically add the <code>kaiwo.silogen.ai/managed: "true"</code> label to any job requesting GPU resources, forcing it to be managed by Kaiwo/Kueue.</p>
</div>
<p>All environmental variables are typically set in the operator's <code>Deployment</code> manifest.</p>
<p><strong>Command-Line Flags:</strong></p>
<p>Refer to the output of <code>kaiwo-operator --help</code> (or check <code>cmd/operator/main.go</code>) for flags controlling metrics, health probes, leader election, and certificate paths.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.sections", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>