---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.1
  name: aimclusterruntimeconfigs.aim.silogen.ai
spec:
  group: aim.silogen.ai
  names:
    categories:
    - aim
    - all
    kind: AIMClusterRuntimeConfig
    listKind: AIMClusterRuntimeConfigList
    plural: aimclusterruntimeconfigs
    shortNames:
    - aimcrcfg
    singular: aimclusterruntimeconfig
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.cacheBaseImages
      name: CacheBaseImages
      type: boolean
    - jsonPath: .spec.defaultStorageClassName
      name: DefaultStorageClass
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: AIMClusterRuntimeConfig defines cluster-scoped runtime defaults
          for AIM resources.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: AIMClusterRuntimeConfigSpec defines cluster-wide defaults
              for AIM resources.
            properties:
              defaultStorageClassName:
                description: |-
                  DefaultStorageClassName specifies the storage class to use for model caches and PVCs
                  when the consuming resource (AIMModelCache, AIMTemplateCache, AIMServiceTemplate) does not
                  specify a storage class. If this field is empty, the cluster's default storage class is used.
                type: string
              model:
                description: Model controls model creation and discovery defaults.
                properties:
                  autoDiscovery:
                    default: true
                    description: |-
                      AutoDiscovery controls whether models run discovery by default.
                      When true, models run discovery jobs to extract metadata and auto-create templates.
                      When false, discovery is skipped. Discovery failures are non-fatal and reported via conditions.
                    type: boolean
                type: object
              pvcHeadroomPercent:
                description: |-
                  PVCHeadroomPercent specifies the percentage of extra space to add to PVCs
                  for model storage. This accounts for filesystem overhead and temporary files
                  during model loading. The value represents a percentage (e.g., 10 means 10% extra space).
                  If not specified, defaults to 10%.
                format: int32
                minimum: 0
                type: integer
              routing:
                description: |-
                  Routing controls HTTP routing defaults applied to AIM resources.
                  When set, these defaults are used for AIMService resources that enable routing
                  but do not specify their own routing configuration.
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    description: |-
                      Annotations defines additional annotations to add to the HTTPRoute resource.
                      These annotations can be used for various purposes such as configuring ingress
                      behavior, adding metadata, or triggering external integrations.
                      Individual services can override these via spec.routing.annotations.
                    type: object
                  enabled:
                    description: |-
                      Enabled controls whether HTTP routing is managed for inference services using this config.
                      When true, the operator creates HTTPRoute resources for services that reference this config.
                      When false or unset, routing must be explicitly enabled on each service.
                      This provides a namespace or cluster-wide default that individual services can override.
                    type: boolean
                  gatewayRef:
                    description: |-
                      GatewayRef specifies the Gateway API Gateway resource that should receive HTTPRoutes.
                      This identifies the parent gateway for routing traffic to inference services.
                      The gateway can be in any namespace (cross-namespace references are supported).
                      If routing is enabled but GatewayRef is not specified, service reconciliation will fail
                      with a validation error.
                    properties:
                      group:
                        default: gateway.networking.k8s.io
                        description: |-
                          Group is the group of the referent.
                          When unspecified, "gateway.networking.k8s.io" is inferred.
                          To set the core API group (such as for a "Service" kind referent),
                          Group must be explicitly set to "" (empty string).

                          Support: Core
                        maxLength: 253
                        pattern: ^$|^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                        type: string
                      kind:
                        default: Gateway
                        description: |-
                          Kind is kind of the referent.

                          There are two kinds of parent resources with "Core" support:

                          * Gateway (Gateway conformance profile)
                          * Service (Mesh conformance profile, ClusterIP Services only)

                          Support for other resources is Implementation-Specific.
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-zA-Z]([-a-zA-Z0-9]*[a-zA-Z0-9])?$
                        type: string
                      name:
                        description: |-
                          Name is the name of the referent.

                          Support: Core
                        maxLength: 253
                        minLength: 1
                        type: string
                      namespace:
                        description: |-
                          Namespace is the namespace of the referent. When unspecified, this refers
                          to the local namespace of the Route.

                          Note that there are specific rules for ParentRefs which cross namespace
                          boundaries. Cross-namespace references are only valid if they are explicitly
                          allowed by something in the namespace they are referring to. For example:
                          Gateway has the AllowedRoutes field, and ReferenceGrant provides a
                          generic way to enable any other kind of cross-namespace reference.
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                      port:
                        description: |-
                          Port is the network port this Route targets. It can be interpreted
                          differently based on the type of parent resource.

                          When the parent resource is a Gateway, this targets all listeners
                          listening on the specified port that also support this kind of Route(and
                          select this Route). It's not recommended to set `Port` unless the
                          networking behaviors specified in a Route must apply to a specific port
                          as opposed to a listener(s) whose port(s) may be changed.
                        format: int32
                        maximum: 65535
                        minimum: 1
                        type: integer
                      sectionName:
                        description: |-
                          SectionName is the name of a section within the target resource. In the
                          following resources, SectionName is interpreted as the following:

                          * Gateway: Listener name. When both Port (experimental) and SectionName
                          are specified, the name and port of the selected listener must match
                          both specified values.
                          * Service: Port name. When both Port (experimental) and SectionName
                          are specified, the name and port of the selected listener must match
                          both specified values.
                        maxLength: 253
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$
                        type: string
                    required:
                    - name
                    type: object
                  pathTemplate:
                    description: |-
                      PathTemplate defines the HTTP path template for routes, evaluated using JSONPath expressions.
                      The template is rendered against the AIMService object to generate unique paths.

                      Example templates:
                      - `/{.metadata.namespace}/{.metadata.name}` - namespace and service name
                      - `/{.metadata.namespace}/{.metadata.labels['team']}/inference` - with label
                      - `/models/{.spec.aimModelName}` - based on model name

                      The template must:
                      - Use valid JSONPath expressions wrapped in {...
                    type: string
                  requestTimeout:
                    description: |-
                      RequestTimeout defines the HTTP request timeout for routes.
                      This sets the maximum duration for a request to complete before timing out.
                      The timeout applies to the entire request/response cycle.
                      If not specified, no timeout is set on the route.
                      Individual services can override this value via spec.routing.requestTimeout.
                    type: string
                type: object
            type: object
          status:
            description: AIMRuntimeConfigStatus records the resolved config reference
              surfaced to consumers.
            properties:
              conditions:
                description: Conditions communicate reconciliation progress.
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              observedGeneration:
                description: ObservedGeneration is the last reconciled generation.
                format: int64
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources: {}
