apiVersion: admissionregistration.k8s.io/v1
kind: MutatingWebhookConfiguration
metadata:
  name: kaiwo-job-mutating
webhooks:
  - name: mutate-jobs.kaiwo.silogen.ai
    admissionReviewVersions: ["v1"]
    clientConfig:
      url: "https://172.17.0.1:9443/mutate-batch-v1-job"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVjakNDQXRxZ0F3SUJBZ0lSQUx2VDk0ZTRRQXRia2VzVmRFSUxYN2N3RFFZSktvWklodmNOQVFFTEJRQXcKVVRFZU1Cd0dBMVVFQ2hNVmJXdGpaWEowSUdSbGRtVnNiM0J0Wlc1MElFTkJNUk13RVFZRFZRUUxEQXBoZG5OMQpibWxBVTB3ME1Sb3dHQVlEVlFRRERCRnRhMk5sY25RZ1lYWnpkVzVwUUZOTU5EQWVGdzB5TlRBeU1qQXdPREl3Ck1qTmFGdzB6TlRBeU1qQXdPREl3TWpOYU1GRXhIakFjQmdOVkJBb1RGVzFyWTJWeWRDQmtaWFpsYkc5d2JXVnUKZENCRFFURVRNQkVHQTFVRUN3d0tZWFp6ZFc1cFFGTk1OREVhTUJnR0ExVUVBd3dSYld0alpYSjBJR0YyYzNWdQphVUJUVERRd2dnR2lNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJqd0F3Z2dHS0FvSUJnUURibldYK1ZzaDdnQ0YrCmd1dFJSNWNWbGdPRnN4WTU1bmNUclkzbFBNTGNkSUpTYW03RlhEUThCYU1XMFA4SHFnOU84Rjhrd0NWSXNDYksKeGdoKzlLWUpZMGR6cXZQczZWWVpMc2s3T2NjVXJPNmJORURSaTVVNlRTam1vdmJIbTFOdUI2dHg1TWdTQ3M0RgpIZHEvOWZyS1dRMnpQVXh2MjNFbUVKcFlaS1oxQVRVWEttUG5PM0I2bzdXQXpRdk8yT1FiSEY4RjhJTkJjMnVwCm1vc0RIVGlJQktya3lqUVdKc0xINE01emJRdHZ1SFpLODBVVzd1eVJ3R0lZaUpZVFc3RG12WEVFN3BlRjY4WGEKMzJGS3hsT3k3clB6cktoSzhrdGZKSVZlRWszUVNlTnhNbEp2ZFVMYzY2cGNVU01LajZpNG5jSlpUVEpOdGxWWgpEMk9iV3lkU3M0L2tMZUVFYTU0OXFISEN1eHdJSmxLYzZRMWgrQnFnK0kreTFIVDNqWUJNOHZMdFMyN3d5cXJaClVqbUN0MUg3bHk2NTQ4RVNDZ0NTc1gyeEtjVi85YzlxK3VBMFhpekNZVGgyL3dVWTJQMzQ4SFN6a1pPcmU5bi8KZUUzWXdNNEZ3SkxhdUQ5TVdCZUMzTE81eUdoTmRoTkVlUUlZN1NDNENOL3YyaVVHVnJrQ0F3RUFBYU5GTUVNdwpEZ1lEVlIwUEFRSC9CQVFEQWdJRU1CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRQXdIUVlEVlIwT0JCWUVGS0RwClljZnU4QlROR1lSZVRFdm9HN25la1RmRE1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQmdRRER1TlM1ZU01TWh6Z3kKLzZMMjZORFpSREVSNnBPenZBQjRjQVV1dHFhOFFkTjBjekUxZzkrVEVSb21SdXN0M1NabGdDNE04V0Z2ZWhuOQptaEtUcHQ2MllYU0lwN3dJc2JZRWQxeVdITW9iVkxOYkE2RmV0NVhJMXo4eHZ0dUVUQTIxNFpmK2pSc0VleUkxCmR6WUw0OGU2UnYyZWRzSlFtSTc4bkV0N1hqb2lnczd2SUFkNktwQzhMYXNkTElPUnJuZjBkY3hlOWJQczNoenEKdDdnV1VuVzV4Z0E2d3oxVGlyQWFoYWJjRWtiS1ZTYjJSYVpCcFRnenJCckQxMzZETHdOdEN4ZUFITmZ2dTlnWAovNFFoTTc4b2oxZUJQdjJzYTdBcFUwNUdMT3J2L2ZFTUowZXFPeFoyakdHc3ZtWHpXNmdHb3M4YWw1L2hBUnNaCkxDZnhvckliYXI1aWJTb1kvdDlsRStxWDNzcUxEMzZacktIcjA0MGh0eHJ4KzBSTk05ZXlGSHVXR1RnZ3RHa0cKUkdHbXFHWStsaUdPMUgzSzlMOVh1Qk40YTBJYVoraHZhckNpL1AwcmJZaUVzWHVpc25ZeFRwUUhMSzBkR2dlYQp0VlZqWDVNS0RKeUx6VVZKZnp5aU8vcGoyTmc5SUJKZnVlQkhyeXJLZnVBSmM4WnRFbjg9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    rules:
      - apiGroups: ["batch"]
        apiVersions: ["v1"]
        operations: ["CREATE", "UPDATE"]
        resources: ["jobs"]
    failurePolicy: Fail
    sideEffects: None
    timeoutSeconds: 5
    matchPolicy: Equivalent
    reinvocationPolicy: Never

---

apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: kaiwo-job-validating
webhooks:
  - name: validate-jobs.kaiwo.silogen.ai
    admissionReviewVersions: ["v1"]
    clientConfig:
      url: "https://172.17.0.1:9443/validate-batch-v1-job"
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVjakNDQXRxZ0F3SUJBZ0lSQUx2VDk0ZTRRQXRia2VzVmRFSUxYN2N3RFFZSktvWklodmNOQVFFTEJRQXcKVVRFZU1Cd0dBMVVFQ2hNVmJXdGpaWEowSUdSbGRtVnNiM0J0Wlc1MElFTkJNUk13RVFZRFZRUUxEQXBoZG5OMQpibWxBVTB3ME1Sb3dHQVlEVlFRRERCRnRhMk5sY25RZ1lYWnpkVzVwUUZOTU5EQWVGdzB5TlRBeU1qQXdPREl3Ck1qTmFGdzB6TlRBeU1qQXdPREl3TWpOYU1GRXhIakFjQmdOVkJBb1RGVzFyWTJWeWRDQmtaWFpsYkc5d2JXVnUKZENCRFFURVRNQkVHQTFVRUN3d0tZWFp6ZFc1cFFGTk1OREVhTUJnR0ExVUVBd3dSYld0alpYSjBJR0YyYzNWdQphVUJUVERRd2dnR2lNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJqd0F3Z2dHS0FvSUJnUURibldYK1ZzaDdnQ0YrCmd1dFJSNWNWbGdPRnN4WTU1bmNUclkzbFBNTGNkSUpTYW03RlhEUThCYU1XMFA4SHFnOU84Rjhrd0NWSXNDYksKeGdoKzlLWUpZMGR6cXZQczZWWVpMc2s3T2NjVXJPNmJORURSaTVVNlRTam1vdmJIbTFOdUI2dHg1TWdTQ3M0RgpIZHEvOWZyS1dRMnpQVXh2MjNFbUVKcFlaS1oxQVRVWEttUG5PM0I2bzdXQXpRdk8yT1FiSEY4RjhJTkJjMnVwCm1vc0RIVGlJQktya3lqUVdKc0xINE01emJRdHZ1SFpLODBVVzd1eVJ3R0lZaUpZVFc3RG12WEVFN3BlRjY4WGEKMzJGS3hsT3k3clB6cktoSzhrdGZKSVZlRWszUVNlTnhNbEp2ZFVMYzY2cGNVU01LajZpNG5jSlpUVEpOdGxWWgpEMk9iV3lkU3M0L2tMZUVFYTU0OXFISEN1eHdJSmxLYzZRMWgrQnFnK0kreTFIVDNqWUJNOHZMdFMyN3d5cXJaClVqbUN0MUg3bHk2NTQ4RVNDZ0NTc1gyeEtjVi85YzlxK3VBMFhpekNZVGgyL3dVWTJQMzQ4SFN6a1pPcmU5bi8KZUUzWXdNNEZ3SkxhdUQ5TVdCZUMzTE81eUdoTmRoTkVlUUlZN1NDNENOL3YyaVVHVnJrQ0F3RUFBYU5GTUVNdwpEZ1lEVlIwUEFRSC9CQVFEQWdJRU1CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRQXdIUVlEVlIwT0JCWUVGS0RwClljZnU4QlROR1lSZVRFdm9HN25la1RmRE1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQmdRRER1TlM1ZU01TWh6Z3kKLzZMMjZORFpSREVSNnBPenZBQjRjQVV1dHFhOFFkTjBjekUxZzkrVEVSb21SdXN0M1NabGdDNE04V0Z2ZWhuOQptaEtUcHQ2MllYU0lwN3dJc2JZRWQxeVdITW9iVkxOYkE2RmV0NVhJMXo4eHZ0dUVUQTIxNFpmK2pSc0VleUkxCmR6WUw0OGU2UnYyZWRzSlFtSTc4bkV0N1hqb2lnczd2SUFkNktwQzhMYXNkTElPUnJuZjBkY3hlOWJQczNoenEKdDdnV1VuVzV4Z0E2d3oxVGlyQWFoYWJjRWtiS1ZTYjJSYVpCcFRnenJCckQxMzZETHdOdEN4ZUFITmZ2dTlnWAovNFFoTTc4b2oxZUJQdjJzYTdBcFUwNUdMT3J2L2ZFTUowZXFPeFoyakdHc3ZtWHpXNmdHb3M4YWw1L2hBUnNaCkxDZnhvckliYXI1aWJTb1kvdDlsRStxWDNzcUxEMzZacktIcjA0MGh0eHJ4KzBSTk05ZXlGSHVXR1RnZ3RHa0cKUkdHbXFHWStsaUdPMUgzSzlMOVh1Qk40YTBJYVoraHZhckNpL1AwcmJZaUVzWHVpc25ZeFRwUUhMSzBkR2dlYQp0VlZqWDVNS0RKeUx6VVZKZnp5aU8vcGoyTmc5SUJKZnVlQkhyeXJLZnVBSmM4WnRFbjg9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
    rules:
      - apiGroups: ["batch"]
        apiVersions: ["v1"]
        operations: ["CREATE", "UPDATE", "DELETE"]
        resources: ["jobs"]
    failurePolicy: Fail
    sideEffects: None
    timeoutSeconds: 5
    matchPolicy: Equivalent
