apiVersion: chainsaw.kyverno.io/v1alpha1
kind: Test
metadata:
  name: download-from-private-bucket
spec:
  concurrent: false
  timeouts:
    assert: 180s
  steps:
    - try:
        - apply:
            file: download-from-private-bucket.yaml
        - assert:
            resource:
              apiVersion: batch/v1
              kind: Job
              metadata:
                name: download-from-private-bucket
                namespace: kaiwo-test
              status:
                status: COMPLETE
        - assert:
            resource:
              apiVersion: kaiwo.silogen.ai/v1alpha1
              kind: KaiwoJob
              metadata:
                name: download-from-private-bucket
                namespace: kaiwo-test
              status:
                status: COMPLETE
      catch:
        - events: {}
        - podLogs: {}