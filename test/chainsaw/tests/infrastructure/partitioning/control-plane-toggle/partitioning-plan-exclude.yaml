apiVersion: infrastructure.silogen.ai/v1alpha1
kind: PartitioningPlan
metadata:
  name: plan-toggle
spec:
  dryRun: true
  rollout:
    maxParallel: 1
    maxUnavailable: 1
    excludeControlPlane: true
  rules:
  - description: exclude control plane nodes
    selector:
      matchExpressions:
      - key: node-role.kubernetes.io/control-plane
        operator: DoesNotExist
      - key: amd.com/gpu
        operator: Exists
    profile:
      description: Chainsaw profile for control plane toggle
      dcmProfileName: default
